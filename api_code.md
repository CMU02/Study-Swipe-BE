# Study Swipe API 에러 코드 문서

Study Swipe 백엔드 API에서 발생할 수 있는 모든 에러 코드와 메시지를 정리한 문서입니다.

## 📋 목차

- [HTTP 상태 코드](#http-상태-코드)
- [인증 (Authentication)](#인증-authentication)
- [약관 동의 (Terms of Use)](#약관-동의-terms-of-use)
- [프로필 (Profiles)](#프로필-profiles)
- [공부 태그 (Study Tags)](#공부-태그-study-tags)
- [AI 설문조사 (Questions & Score)](#ai-설문조사-questions--score)
- [매칭 시스템 (Matching)](#매칭-시스템-matching)
- [대학교 (Universities)](#대학교-universities)
- [지역 (Regions)](#지역-regions)
- [전공 (Major)](#전공-major)
- [협업 성향 (Collab Style)](#협업-성향-collab-style)
- [모임 유형 (Meeting Types)](#모임-유형-meeting-types)
- [흡연 상태 (Smoking Status)](#흡연-상태-smoking-status)
- [사교모임 선호도 (Social Prefs)](#사교모임-선호도-social-prefs)
- [선호 인원 수 (Preferred Member Count)](#선호-인원-수-preferred-member-count)
- [사용자 (User)](#사용자-user)

---

## HTTP 상태 코드

### 성공 응답

| 코드 | 이름       | 설명                             |
| ---- | ---------- | -------------------------------- |
| 200  | OK         | 요청 성공 (조회, 수정)           |
| 201  | Created    | 리소스 생성 성공                 |
| 204  | No Content | 요청 성공, 응답 본문 없음 (삭제) |

### 클라이언트 에러

| 코드 | 이름              | 설명                                     |
| ---- | ----------------- | ---------------------------------------- |
| 400  | Bad Request       | 잘못된 요청 / 검증 실패                  |
| 401  | Unauthorized      | 인증 실패 (토큰 없음/만료/유효하지 않음) |
| 403  | Forbidden         | 권한 부족                                |
| 404  | Not Found         | 리소스를 찾을 수 없음                    |
| 409  | Conflict          | 중복 데이터 / 충돌                       |
| 429  | Too Many Requests | 요청 제한 초과 (Rate Limit)              |

### 서버 에러

| 코드 | 이름                  | 설명                    |
| ---- | --------------------- | ----------------------- |
| 500  | Internal Server Error | 서버 내부 오류          |
| 503  | Service Unavailable   | 서비스 일시적 사용 불가 |

---

## 인증 (Authentication)

### 400 Bad Request

| 에러 메시지                             | 발생 상황                               | 해결 방법           |
| --------------------------------------- | --------------------------------------- | ------------------- |
| `해당 아이디를 가진 사용자가 없습니다.` | 인증 코드 확인 시 사용자를 찾을 수 없음 | 올바른 user_id 확인 |

### 401 Unauthorized

| 에러 메시지                      | 발생 상황                        | 해결 방법                 |
| -------------------------------- | -------------------------------- | ------------------------- |
| `인증 토큰이 필요합니다.`        | Authorization 헤더 없음          | JWT 토큰 포함하여 요청    |
| `인증 토큰이 유효하지 않습니다.` | JWT 토큰 만료 또는 유효하지 않음 | 새로운 토큰 발급 (로그인) |
| `아이디가 틀립니다.`             | 로그인 시 존재하지 않는 아이디   | 올바른 아이디 입력        |
| `비밀번호가 틀립니다.`           | 로그인 시 비밀번호 불일치        | 올바른 비밀번호 입력      |
| `인증코드가 올바르지 않습니다.`  | 이메일 인증 코드 불일치          | 올바른 인증 코드 입력     |

### 404 Not Found

| 에러 메시지                            | 발생 상황                  | 해결 방법          |
| -------------------------------------- | -------------------------- | ------------------ |
| `사용자 정보를 찾을 수 없습니다.`      | 로그인 시 사용자 정보 없음 | 회원가입 먼저 진행 |
| `이메일 인증 코드를 찾을 수 없습니다.` | 인증 코드 발송 이력 없음   | 인증 코드 재발송   |

### 409 Conflict

| 에러 메시지                        | 발생 상황                        | 해결 방법        |
| ---------------------------------- | -------------------------------- | ---------------- |
| `이미 가입된 아이디입니다.`        | 회원가입 시 아이디 중복          | 다른 아이디 사용 |
| `이미 인증이 완료된 사용자입니다.` | 이미 인증된 사용자가 재인증 시도 | 로그인 진행      |

### 429 Too Many Requests

| 에러 메시지                 | 발생 상황                  | 해결 방법     |
| --------------------------- | -------------------------- | ------------- |
| `요청 횟수를 초과했습니다.` | 로그인 시도 1분간 5회 초과 | 1분 후 재시도 |

---

## 약관 동의 (Terms of Use)

### 404 Not Found

| 에러 메시지                           | 발생 상황                             | 해결 방법           |
| ------------------------------------- | ------------------------------------- | ------------------- |
| `해당 아이디를 가진 사용자 없습니다.` | 존재하지 않는 사용자의 약관 동의 시도 | 올바른 user_id 확인 |

---

## 프로필 (Profiles)

### 404 Not Found

| 에러 메시지                       | 발생 상황                     | 해결 방법        |
| --------------------------------- | ----------------------------- | ---------------- |
| `프로필 정보를 찾을 수 없습니다.` | 프로필이 생성되지 않은 사용자 | 프로필 먼저 생성 |

---

## 공부 태그 (Study Tags)

### 400 Bad Request

| 에러 메시지                                             | 발생 상황                         | 해결 방법                       |
| ------------------------------------------------------- | --------------------------------- | ------------------------------- |
| `공부 태그는 최대 5개까지만 설정할 수 있습니다.`        | 태그 6개 이상 등록 시도           | 최대 5개로 제한                 |
| `우선순위는 중복될 수 없습니다.`                        | 동일한 priority 값 사용           | 1~5 사이 고유한 값 사용         |
| `우선순위는 1부터 5까지의 값이어야 합니다.`             | priority 범위 초과                | 1~5 사이 값 사용                |
| `해당하는 공부 태그가 존재하지 않습니다.`               | 존재하지 않는 태그 수정/삭제 시도 | 올바른 태그 ID 확인             |
| `태그 "{tag}"에 해당하는 공부 태그를 찾을 수 없습니다.` | 설문조사 완료 시 태그 불일치      | 프로필의 태그와 일치하는지 확인 |

### 404 Not Found

| 에러 메시지                  | 발생 상황                            | 해결 방법          |
| ---------------------------- | ------------------------------------ | ------------------ |
| `사용자를 찾을 수 없습니다.` | 존재하지 않는 사용자의 태그 업데이트 | 올바른 사용자 확인 |

---

## AI 설문조사 (Questions & Score)

### 400 Bad Request

| 에러 메시지                                                         | 발생 상황                        | 해결 방법                      |
| ------------------------------------------------------------------- | -------------------------------- | ------------------------------ |
| `tags 배열을 1~5개로 보내주세요.`                                   | 태그 0개 또는 6개 이상           | 1~5개 태그 제공                |
| `tags는 최대 5개까지만 허용됩니다.`                                 | 태그 6개 이상                    | 최대 5개로 제한                |
| `answers 배열(태그별 블록)을 제공해주세요.`                         | answers 배열 없음 또는 비어있음  | 응답 데이터 제공               |
| `answers가 비었습니다.`                                             | 빈 answers 배열                  | 최소 1개 이상 응답 제공        |
| `각 블록은 tag가 필요합니다.`                                       | tag 필드 누락                    | 모든 블록에 tag 포함           |
| `태그 "{tag}"의 questions가 비었습니다.`                            | 특정 태그의 질문 응답 없음       | 모든 질문에 응답               |
| `no가 유효하지 않습니다: {no}`                                      | 질문 번호가 숫자가 아님          | 올바른 숫자 형식 사용          |
| `level은 기초/경험/응용 중 하나여야 합니다: no={no}, level={level}` | 잘못된 level 값                  | '기초', '경험', '응용' 중 선택 |
| `value는 1~5 사이여야 합니다: no={no}, value={value}`               | 응답 값 범위 초과                | 1~5 사이 값 사용               |
| `중복 응답: no={no}`                                                | 동일한 질문 번호 중복 응답       | 각 질문은 한 번만 응답         |
| `채점할 문항이 없습니다.`                                           | 유효한 응답 없음                 | 최소 1개 이상 응답 제공        |
| `사용자 프로필을 찾을 수 없습니다.`                                 | 프로필 미생성 상태에서 설문 완료 | 프로필 먼저 생성               |

---

## 매칭 시스템 (Matching)

### 404 Not Found

| 에러 메시지                         | 발생 상황                      | 해결 방법        |
| ----------------------------------- | ------------------------------ | ---------------- |
| `사용자 프로필을 찾을 수 없습니다.` | 프로필 없는 사용자의 매칭 시도 | 프로필 먼저 생성 |

---

## 대학교 (Universities)

### 404 Not Found

| 에러 메시지                  | 발생 상황                              | 해결 방법             |
| ---------------------------- | -------------------------------------- | --------------------- |
| `사용자를 찾을 수 없습니다.` | 존재하지 않는 사용자의 대학교 업데이트 | 올바른 사용자 확인    |
| `대학교를 찾을 수 없습니다.` | 존재하지 않는 대학교 ID 조회           | 올바른 대학교 ID 확인 |

---

## 지역 (Regions)

### 404 Not Found

| 에러 메시지                               | 발생 상황               | 해결 방법             |
| ----------------------------------------- | ----------------------- | --------------------- |
| `해당하는 지역 정보가 존재하지 않습니다.` | 존재하지 않는 지역 이름 | 올바른 지역 이름 확인 |
| `해당 지역 ID가 존재하지 않습니다.`       | 존재하지 않는 지역 ID   | 올바른 지역 ID 확인   |

---

## 전공 (Major)

### 404 Not Found

| 에러 메시지                          | 발생 상황                    | 해결 방법        |
| ------------------------------------ | ---------------------------- | ---------------- |
| `해당하는 전공이 존재하지 않습니다.` | 존재하지 않는 전공 조회/수정 | 올바른 전공 확인 |

### 500 Internal Server Error

| 에러 메시지                      | 발생 상황      | 해결 방법          |
| -------------------------------- | -------------- | ------------------ |
| `전공명은 비어있을 수 없습니다.` | 빈 전공명 제공 | 유효한 전공명 입력 |

---

## 협업 성향 (Collab Style)

### 404 Not Found

| 에러 메시지                               | 발생 상황                  | 해결 방법                                            |
| ----------------------------------------- | -------------------------- | ---------------------------------------------------- |
| `해당하는 협업 성향이 존재하지 않습니다.` | 존재하지 않는 협업 성향 ID | 올바른 협업 성향 ID 확인 (1: 멘토, 2: 피어, 3: 러너) |

---

## 모임 유형 (Meeting Types)

### 404 Not Found

| 에러 메시지                               | 발생 상황                  | 해결 방법                                                  |
| ----------------------------------------- | -------------------------- | ---------------------------------------------------------- |
| `해당하는 모임 유형이 존재하지 않습니다.` | 존재하지 않는 모임 유형 ID | 올바른 모임 유형 ID 확인 (1: 온라인, 2: 오프라인, 3: 혼합) |
| `해당 모임 유형 ID가 존재하지 않습니다.`  | 존재하지 않는 모임 유형 ID | 올바른 모임 유형 ID 확인                                   |

---

## 흡연 상태 (Smoking Status)

### 404 Not Found

| 에러 메시지                               | 발생 상황                    | 해결 방법                                     |
| ----------------------------------------- | ---------------------------- | --------------------------------------------- |
| `해당하는 흡연 상태가 존재하지 않습니다.` | 존재하지 않는 흡연 상태 이름 | 올바른 흡연 상태 확인 (비흡연, 흡연, 금연 중) |

---

## 사교모임 선호도 (Social Prefs)

### 404 Not Found

| 에러 메시지                                     | 발생 상황                     | 해결 방법                             |
| ----------------------------------------------- | ----------------------------- | ------------------------------------- |
| `해당하는 사교모임 선호도가 존재하지 않습니다.` | 존재하지 않는 사교모임 선호도 | 올바른 선호도 확인 (네, 아니오, 가끔) |

---

## 선호 인원 수 (Preferred Member Count)

### 404 Not Found

| 에러 메시지                             | 발생 상황                | 해결 방법              |
| --------------------------------------- | ------------------------ | ---------------------- |
| `선호 인원 수 정보를 찾을 수 없습니다.` | 선호 인원 수 미설정 상태 | 선호 인원 수 먼저 설정 |

---

## 사용자 (User)

### 404 Not Found

| 에러 메시지               | 발생 상황                 | 해결 방법               |
| ------------------------- | ------------------------- | ----------------------- |
| `해당 사용자는 없습니다.` | 존재하지 않는 사용자 조회 | 올바른 사용자 UUID 확인 |

---

## 🔍 에러 응답 형식

모든 에러는 다음과 같은 형식으로 반환됩니다:

```json
{
  "status_code": 400,
  "message": "에러 메시지",
  "error": "상세 에러 정보 (선택적)"
}
```

### 예시

#### 400 Bad Request

```json
{
  "status_code": 400,
  "message": "공부 태그는 최대 5개까지만 설정할 수 있습니다."
}
```

#### 401 Unauthorized

```json
{
  "status_code": 401,
  "message": "인증 토큰이 유효하지 않습니다."
}
```

#### 404 Not Found

```json
{
  "status_code": 404,
  "message": "사용자 프로필을 찾을 수 없습니다."
}
```

#### 409 Conflict

```json
{
  "status_code": 409,
  "message": "이미 가입된 아이디입니다."
}
```

---

## 📊 에러 코드 통계

### 에러 타입별 분포

| 에러 타입                 | 개수 | 비율 |
| ------------------------- | ---- | ---- |
| 404 Not Found             | 25   | 45%  |
| 400 Bad Request           | 20   | 36%  |
| 401 Unauthorized          | 6    | 11%  |
| 409 Conflict              | 3    | 5%   |
| 429 Too Many Requests     | 1    | 2%   |
| 500 Internal Server Error | 1    | 2%   |

### 모듈별 에러 개수

| 모듈                                      | 에러 개수 |
| ----------------------------------------- | --------- |
| AI 설문조사 (Questions & Score)           | 13        |
| 인증 (Authentication)                     | 9         |
| 공부 태그 (Study Tags)                    | 6         |
| 프로필 관련 (Profiles, Regions, Major 등) | 15        |
| 매칭 시스템 (Matching)                    | 1         |
| 대학교 (Universities)                     | 2         |
| 기타                                      | 10        |

---

## 🛠️ 에러 처리 가이드

### 클라이언트 측 에러 처리

```typescript
try {
  const response = await fetch('/api/endpoint', {
    method: 'POST',
    headers: {
      Authorization: `Bearer ${token}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  });

  if (!response.ok) {
    const error = await response.json();

    switch (error.status_code) {
      case 400:
        // 잘못된 요청 처리
        console.error('입력 데이터를 확인해주세요:', error.message);
        break;
      case 401:
        // 인증 실패 처리
        console.error('로그인이 필요합니다:', error.message);
        // 로그인 페이지로 리다이렉트
        break;
      case 404:
        // 리소스 없음 처리
        console.error('요청한 리소스를 찾을 수 없습니다:', error.message);
        break;
      case 409:
        // 충돌 처리
        console.error('중복된 데이터입니다:', error.message);
        break;
      case 429:
        // Rate Limit 처리
        console.error('요청이 너무 많습니다. 잠시 후 다시 시도해주세요.');
        break;
      default:
        console.error('알 수 없는 에러:', error.message);
    }
  }
} catch (error) {
  console.error('네트워크 에러:', error);
}
```

### 재시도 로직

```typescript
async function fetchWithRetry(
  url: string,
  options: RequestInit,
  maxRetries = 3,
) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await fetch(url, options);

      if (response.status === 429) {
        // Rate Limit 시 대기 후 재시도
        await new Promise((resolve) => setTimeout(resolve, 60000));
        continue;
      }

      return response;
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise((resolve) => setTimeout(resolve, 1000 * (i + 1)));
    }
  }
}
```

---

## 🔄 업데이트 이력

- **2025-10-05**: 초기 문서 작성
  - 모든 서비스 및 컨트롤러의 에러 코드 정리
  - 에러 타입별 분류 및 해결 방법 추가
  - 클라이언트 측 에러 처리 가이드 추가

---

**버전**: 1.0.0  
**최종 업데이트**: 2025-10-05  
**총 에러 코드 수**: 56개
